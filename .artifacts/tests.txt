
> clockify-xcfe@0.1.0 test /Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe
> pnpm --filter @xcfe/api test && pnpm --filter @xcfe/admin-ui test


> @xcfe/api@0.1.0 test /Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/apps/api
> cd ../.. && npx vitest run --config vitest.config.ts

[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m

 RUN  v1.6.1 /Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe

 âœ“ tests/webhookSecurity.spec.ts  (8 tests) 4ms
 âœ“ tests/formulas.spec.ts  (5 tests) 6ms
 âœ“ tests/formulaEngineSecurity.spec.ts  (10 tests) 13ms
 âœ“ tests/otRules.spec.ts  (9 tests) 8ms
{"level":"info","time":"2025-10-08T23:33:08.342Z","pid":15555,"env":"test","correlationId":"corr-1","entryId":"5f118c837db7a8637ffcaf36","updates":[{"customFieldId":"amount-field","fieldKey":"Amount","value":75}],"msg":"Applied custom field updates"}
 âœ“ tests/webhook.spec.ts  (2 tests) 19ms
{"level":"info","time":"2025-10-08T23:33:08.377Z","pid":15555,"params":{"from":"2024-01-01T00:00:00Z","to":"2024-01-01T23:59:59Z","dryRun":true},"correlationId":"df7561c2-b93e-4682-9568-c883375ed501","workspaceId":"test-workspace","msg":"Starting backfill operation"}
{"level":"info","time":"2025-10-08T23:33:08.377Z","pid":15555,"dayCount":1,"startDate":"2024-01-01T00:00:00.000Z","endDate":"2024-01-01T23:59:59.000Z","msg":"Processing backfill by daily windows"}
{"level":"debug","time":"2025-10-08T23:33:08.377Z","pid":15555,"date":"2024-01-01","dayStart":"2024-01-01T00:00:00Z","dayEnd":"2024-01-01T23:59:59Z","msg":"Processing day window"}
{"level":"warn","time":"2025-10-08T23:33:08.377Z","pid":15555,"retryAfterMs":1000,"attempt":1,"page":1,"date":"2024-01-01","msg":"Rate limited during reports API call, retrying"}
{"level":"info","time":"2025-10-08T23:33:09.377Z","pid":15555,"date":"2024-01-01","scanned":1,"updated":0,"errors":0,"msg":"Completed day window"}
{"level":"info","time":"2025-10-08T23:33:09.377Z","pid":15555,"result":{"scanned":1,"updated":0,"dryRun":true,"days":1},"correlationId":"df7561c2-b93e-4682-9568-c883375ed501","msg":"Backfill operation completed"}
{"level":"info","time":"2025-10-08T23:33:08.380Z","pid":15555,"params":{"from":"2024-01-01T00:00:00Z","to":"2024-01-01T23:59:59Z","dryRun":false},"correlationId":"7f8ce7e6-8323-4545-89a9-50a12039394b","workspaceId":"test-workspace","msg":"Starting backfill operation"}
{"level":"info","time":"2025-10-08T23:33:08.380Z","pid":15555,"dayCount":1,"startDate":"2024-01-01T00:00:00.000Z","endDate":"2024-01-01T23:59:59.000Z","msg":"Processing backfill by daily windows"}
{"level":"debug","time":"2025-10-08T23:33:08.380Z","pid":15555,"date":"2024-01-01","dayStart":"2024-01-01T00:00:00Z","dayEnd":"2024-01-01T23:59:59Z","msg":"Processing day window"}
{"level":"warn","time":"2025-10-08T23:33:08.380Z","pid":15555,"entryId":"entry-1","retryAfterMs":1000,"attempt":1,"msg":"Rate limited during backfill patch, retrying"}
{"level":"info","time":"2025-10-08T23:33:09.380Z","pid":15555,"date":"2024-01-01","scanned":1,"updated":1,"errors":0,"msg":"Completed day window"}
{"level":"info","time":"2025-10-08T23:33:09.380Z","pid":15555,"result":{"scanned":1,"updated":1,"dryRun":false,"days":1},"correlationId":"7f8ce7e6-8323-4545-89a9-50a12039394b","msg":"Backfill operation completed"}
{"level":"info","time":"2025-10-08T23:33:08.382Z","pid":15555,"params":{"from":"2024-01-01T00:00:00Z","to":"2024-01-01T23:59:59Z","dryRun":true},"correlationId":"1ece624b-5985-4383-bd1a-30738d437819","workspaceId":"test-workspace","msg":"Starting backfill operation"}
{"level":"info","time":"2025-10-08T23:33:08.382Z","pid":15555,"dayCount":1,"startDate":"2024-01-01T00:00:00.000Z","endDate":"2024-01-01T23:59:59.000Z","msg":"Processing backfill by daily windows"}
{"level":"debug","time":"2025-10-08T23:33:08.382Z","pid":15555,"date":"2024-01-01","dayStart":"2024-01-01T00:00:00Z","dayEnd":"2024-01-01T23:59:59Z","msg":"Processing day window"}
{"level":"info","time":"2025-10-08T23:33:08.385Z","pid":15555,"date":"2024-01-01","scanned":250,"updated":0,"errors":0,"msg":"Completed day window"}
{"level":"info","time":"2025-10-08T23:33:08.385Z","pid":15555,"result":{"scanned":250,"updated":0,"dryRun":true,"days":1},"correlationId":"1ece624b-5985-4383-bd1a-30738d437819","msg":"Backfill operation completed"}
{"level":"info","time":"2025-10-08T23:33:08.385Z","pid":15555,"params":{"from":"2024-01-01T00:00:00Z","to":"2024-01-03T23:59:59Z","dryRun":true},"correlationId":"92885f65-5f17-461d-aef2-3ce0ac367f91","workspaceId":"test-workspace","msg":"Starting backfill operation"}
{"level":"info","time":"2025-10-08T23:33:08.385Z","pid":15555,"dayCount":3,"startDate":"2024-01-01T00:00:00.000Z","endDate":"2024-01-03T23:59:59.000Z","msg":"Processing backfill by daily windows"}
{"level":"debug","time":"2025-10-08T23:33:08.385Z","pid":15555,"date":"2024-01-01","dayStart":"2024-01-01T00:00:00Z","dayEnd":"2024-01-01T23:59:59Z","msg":"Processing day window"}
{"level":"info","time":"2025-10-08T23:33:08.385Z","pid":15555,"date":"2024-01-01","scanned":1,"updated":0,"errors":0,"msg":"Completed day window"}
{"level":"debug","time":"2025-10-08T23:33:08.385Z","pid":15555,"date":"2024-01-02","dayStart":"2024-01-02T00:00:00Z","dayEnd":"2024-01-02T23:59:59Z","msg":"Processing day window"}
{"level":"info","time":"2025-10-08T23:33:08.385Z","pid":15555,"date":"2024-01-02","scanned":1,"updated":0,"errors":0,"msg":"Completed day window"}
{"level":"debug","time":"2025-10-08T23:33:08.385Z","pid":15555,"date":"2024-01-03","dayStart":"2024-01-03T00:00:00Z","dayEnd":"2024-01-03T23:59:59Z","msg":"Processing day window"}
{"level":"info","time":"2025-10-08T23:33:08.385Z","pid":15555,"date":"2024-01-03","scanned":1,"updated":0,"errors":0,"msg":"Completed day window"}
{"level":"info","time":"2025-10-08T23:33:08.385Z","pid":15555,"result":{"scanned":3,"updated":0,"dryRun":true,"days":3},"correlationId":"92885f65-5f17-461d-aef2-3ce0ac367f91","msg":"Backfill operation completed"}
{"level":"info","time":"2025-10-08T23:33:08.386Z","pid":15555,"params":{"from":"2024-01-01T00:00:00Z","to":"2024-01-01T23:59:59Z","dryRun":true},"correlationId":"e7c8a011-55ef-440d-afb1-b77bb2b40cc4","workspaceId":"test-workspace","msg":"Starting backfill operation"}
{"level":"info","time":"2025-10-08T23:33:08.386Z","pid":15555,"dayCount":1,"startDate":"2024-01-01T00:00:00.000Z","endDate":"2024-01-01T23:59:59.000Z","msg":"Processing backfill by daily windows"}
{"level":"debug","time":"2025-10-08T23:33:08.386Z","pid":15555,"date":"2024-01-01","dayStart":"2024-01-01T00:00:00Z","dayEnd":"2024-01-01T23:59:59Z","msg":"Processing day window"}
{"level":"info","time":"2025-10-08T23:33:08.386Z","pid":15555,"date":"2024-01-01","scanned":1,"updated":1,"errors":0,"msg":"Completed day window"}
{"level":"info","time":"2025-10-08T23:33:08.386Z","pid":15555,"result":{"scanned":1,"updated":1,"dryRun":true,"days":1},"correlationId":"e7c8a011-55ef-440d-afb1-b77bb2b40cc4","msg":"Backfill operation completed"}
{"level":"info","time":"2025-10-08T23:33:08.386Z","pid":15555,"params":{"from":"2024-01-01T00:00:00Z","to":"2024-01-01T23:59:59Z","dryRun":false},"correlationId":"f0c39908-2f75-47bb-997a-9baabc8dcade","workspaceId":"test-workspace","msg":"Starting backfill operation"}
{"level":"info","time":"2025-10-08T23:33:08.386Z","pid":15555,"dayCount":1,"startDate":"2024-01-01T00:00:00.000Z","endDate":"2024-01-01T23:59:59.000Z","msg":"Processing backfill by daily windows"}
{"level":"debug","time":"2025-10-08T23:33:08.386Z","pid":15555,"date":"2024-01-01","dayStart":"2024-01-01T00:00:00Z","dayEnd":"2024-01-01T23:59:59Z","msg":"Processing day window"}
{"level":"error","time":"2025-10-08T23:33:08.386Z","pid":15555,"err":{"type":"Error","message":"Network error","stack":"Error: Network error\n    at /Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/tests/backfill.spec.ts:223:55\n    at file:///Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:135:14\n    at file:///Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:60:26\n    at runTest (file:///Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:781:17)\n    at runSuite (file:///Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:909:15)\n    at runSuite (file:///Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:909:15)\n    at runFiles (file:///Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:958:5)\n    at startTests (file:///Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:967:3)\n    at file:///Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/node_modules/.pnpm/vitest@1.6.1_@types+node@20.19.19/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7\n    at withEnv (file:///Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/node_modules/.pnpm/vitest@1.6.1_@types+node@20.19.19/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:83:5)"},"entryId":"entry-1","correlationId":"f0c39908-2f75-47bb-997a-9baabc8dcade-day-2024-01-01-page-1-entry-1","msg":"Failed to process entry during backfill"}
{"level":"info","time":"2025-10-08T23:33:08.389Z","pid":15555,"date":"2024-01-01","scanned":1,"updated":0,"errors":1,"msg":"Completed day window"}
{"level":"info","time":"2025-10-08T23:33:08.389Z","pid":15555,"result":{"scanned":1,"updated":0,"dryRun":false,"days":1},"correlationId":"f0c39908-2f75-47bb-997a-9baabc8dcade","msg":"Backfill operation completed"}
 âœ“ tests/backfill.spec.ts  (6 tests) 13ms

 Test Files  6 passed (6)
      Tests  40 passed (40)
   Start at  01:33:07
   Duration  453ms (transform 373ms, setup 64ms, collect 758ms, tests 63ms, environment 1ms, prepare 646ms)


> @xcfe/admin-ui@0.1.0 test /Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/apps/admin-ui
> vitest --run


 RUN  v1.6.1 /Users/15x/Downloads/xCustomFieldExpander/clockify-xcfe/apps/admin-ui

 âœ“ src/__tests__/smoke.spec.ts  (1 test) 1ms

 Test Files  1 passed (1)
      Tests  1 passed (1)
   Start at  01:33:08
   Duration  189ms (transform 14ms, setup 0ms, collect 12ms, tests 1ms, environment 0ms, prepare 50ms)

